window.store=function(a){"use strict";var b=a;return{storage:function(c){return c&&(b=c),(b===a?"local":"session")+"Storage"},set:function(a,c){"object"==typeof c&&(c=JSON.stringify(c)),b.setItem(a,c)},get:function(a){if(!a)return null;var c=b.getItem(a);if(c&&("{"==c[0]||"["==c[0]))try{c=JSON.parse(c)}catch(d){}return+c==c?+c:("true"==c?c=!0:"false"==c&&(c=!1),c)},push:function(a,b,c){c||(c=b);var d=store.get(a);if(d||(d="object"==typeof b||3==arguments.length?{}:[]),"object"==typeof d){if(d.constructor===Array)d.push(c);else if(arguments.length<3&&"object"!=typeof c)store._error("push","Cannot push empty value to "+a);else if("object"==typeof c&&c===b)for(var e in c)d[e]=c[e];else d[b]=c;store.set(a,d)}else store._error("push","Cannot push to "+a+" ("+typeof a+")");return d},pop:function(a,b){var c=store.get(a);return"object"==typeof c?(c.constructor===Array?c.pop():delete c[b],store.set(a,c),c):void store._error("pop","Cannot pop from "+a+" ("+typeof a+")")},remove:function(a){return b.removeItem(a)},clear:function(){return b.clear()},_error:function(a,b){throw new Error("store.js: "+a+": "+b)}}}(localStorage);